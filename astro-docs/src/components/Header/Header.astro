---
import { getLanguageFromURL, KNOWN_LANGUAGE_CODES } from '../../languages';
import * as CONFIG from '../../config';
import SidebarToggle from './SidebarToggle';
import LanguageSelect from './LanguageSelect';
import Search from './Search';

type Props = {
	currentPage: string;
};

const { currentPage } = Astro.props as Props;
const lang = getLanguageFromURL(currentPage);
---
<style>
	
.header-link {
	font-size: 1em;
	transition: border-inline-start-color 100ms ease-out, background-color 200ms ease-out;
	border-left: 4px solid var(--theme-divider);
}

.header-link a {
	display: inline-flex;
	gap: 0.5em;
	width: 100%;
	font: inherit;
	padding: 0.4rem 0;
	line-height: 1.3;
	color: inherit;
	text-decoration: none;
	unicode-bidi: plaintext;
}



.header-link:hover,
.header-link:focus,
.header-link:focus-within {
	border-inline-start-color: blue;
}

.header-link:hover a,
.header-link a:focus {
	color: red;
	text-decoration: underline;
}
.header-link svg {
	opacity: 0.6;
}
.header-link:hover svg {
	opacity: 0.8;
}

/* Add line and padding on the left side */
.header-link {
	padding-inline-start: 1rem;
}
.header-link.depth-3 {
	padding-inline-start: 2rem;
}
.header-link.depth-4 {
	padding-inline-start: 3rem;
}



/* Highlight TOC header link matching the current scroll position */
.current-header-link {
	background-color: yellow;
	/* Indicates the current heading for forced colors users in older browsers */
	outline: 1px solid transparent;
}

@media (forced-colors: active) {
	.current-header-link {
		border: 1px solid CanvasText;
	}
}

.current-header-link a {
	color: var(--theme-text);
}

</style>
<header class="flex fixed opacity-90 h-30 w-full z-50 bg-white border-b dark:bg-black">
	<nav class="flex flex-row items-center w-full" title="Top Navigation">
		<div class="md:hidden">
			<SidebarToggle client:idle />
		</div>
		<div class="flex-grow w-3/5 font-bold text-xl">
			<a href="/">
				<h1>{CONFIG.SITE.title}</h1>
			</a>
		</div>
		<div class="flex-grow w-1/5"></div>
		{KNOWN_LANGUAGE_CODES.length > 1 && <LanguageSelect lang={lang} client:idle />}
		<div class="flex-grow w-1/5">
			<Search client:idle />
		</div>
	</nav>
</header>

